title: 2021-03-31
author: 98hyun
published: 2021-03-31
description: ì •ê·œí‘œí˜„ì‹ê³¼ NLPì— ëŒ€í•´ì„œ ê°„ë‹¨í•˜ê²Œ ê³µë¶€í–ˆë‹¤. 4ì›”ì— bertì™€ fasttextë¥¼ ì†Œê°œí•  ìƒê°ì´ë‹¤. pythonë¬¸ë²•, latex, html symbolsì™€ emojiì— ëŒ€í•´ ê°„ë‹¨íˆ ì–¸ê¸‰í•œë‹¤. matplotlib ê·¸ë¦¬ê³  matplotlibì— ê¸€ê³¼ ê·¸ë¦¼ì„ í•œë²ˆì— í‘œí˜„í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí•œë‹¤. ì´ë²ˆ 3ì›”ì˜ ê³µë¶€ëŠ” í†µê³„ë¥¼ ë§ì´ ê³µë¶€í–ˆë‹¤. ë§¥ë¶ë„ ê³µë¶€í–ˆë‹¤. 
tags: [ë°ì´í„°ë¶„ì„, í†µê³„, ì‹œê°í™”]

<span style="border:solid 1px black;background-color:#2e3f59"> </span> &nbsp; ì •ê·œí‘œí˜„ì‹ê³¼ NLP  

ê·œì¹™ê³¼ í•¨ìˆ˜ê°€ ìˆë‹¤ë©´ ë¹ ë¥´ê²Œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë‹¤.  

    :::python
    import re 

    s='https://98hyun.github.io/ here'
    p=re.compile(r'https\S+')
    print(p.sub(r'',s))
    # _here

    # ìì£¼ ì‚¬ìš©í•˜ëŠ” ì¶•ì•½ì–´. ê±°ì˜ escapeì™€ [] ì´ê±° ë§ì´ ì‚¬ìš©í•œë‹¤.  

<img src="https://i.stack.imgur.com/KiaKd.png" width=700 height=600>

<span style="border:solid 1px black;background-color:#2e3f59"> </span> &nbsp; latexì™€ python

ë¹¼ë†“ì„ ìˆ˜ ì—†ë‹¤. íŠ¹íˆ, matplotlib ì™€ ì—°ê³„ë¡œ. [ì°¸ê³ ](https://ko.wikipedia.org/wiki/%EC%9C%84%ED%82%A4%EB%B0%B1%EA%B3%BC:TeX_%EB%AC%B8%EB%B2%95)  

    :::python 
    import numpy as np
    import matplotlib.pyplot as plt

    # ì‹¤í–‰í•˜ë©´ 
    x=np.linspace(-10,10,100)
    y=np.tanh(x)

    plt.figure()
    plt.plot(x,y)
    plt.xlabel('$x$')
    plt.ylabel('$\\tanh(x)$')
    plt.title('ìŒê³¡íƒ„ì  íŠ¸í•¨ìˆ˜',fontproperties=fontprop)
    plt.suptitle(r'ì •ì˜ì—­ : ëª¨ë“ ì‹¤ìˆ˜, ì¹˜ì—­ : [-1,1]',fontproperties=fontprop,x=0.34,y=0.8)
    plt.grid();

![](https://ifh.cc/g/ybX98u.png)   

    :::python 
    # ì´ê±°ëŠ” ê·¸ëƒ¥ jupyter í™˜ê²½ì—ì„œ ì‹¤í–‰í•˜ë©´ latexí˜•íƒœë¡œ í‘œí˜„í•œë‹¤.  
    from sympy import *

    x,u=symbols('x u')
    u=sin(x)
    
    diff(u,x)
    # ì°¸ê³ í•´ì„œ ê·¸ë¦° ê·¸ë¦¼. 

![](https://ifh.cc/g/ho96TT.png)
        
<span style="border:solid 1px black;background-color:#2e3f59"> </span> &nbsp; íŒŒì´ì¬ ìŠ¤í‚¬.

ê³µë¶€í•˜ë©´ì„œ ë°°ìš´ íŒŒì´ì¬ ìŠ¤í‚¬.  

    :::python 
    # ë¸”ë¡ì²´ì¸ ë‚´ìš© ì¤‘. 
    # classë‚´ì— êµ¬í˜„ëœ hashí•¨ìˆ˜. snip
    # ì‘ìš©í•˜ëŠ”ê²ƒì€ classì•ˆì—ì„œë„ self.hash(last_block)ë¡œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë‹¤.  

    @staticmethod
    def hash(block):
        block_string = json.dumps(block, sort_keys=True).encode()
        return hashlib.sha256(block_string).hexdigest()

    # ê·¸ ì™¸ë¡œ classmethodê°€ ìˆëŠ”ë°. ì°¸ê³ . https://dojang.io/mod/page/view.php?id=2380 
    # cls ì¸ìë¥¼ ê¼­ ë°›ëŠ”ë‹¤. êµ³ì´ í•„ìš”ìˆë‚˜ ì‹¶ë‹¤.  

    # clsë¡œ class ì†ì„±ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. 
    @classmethod
    def print_count(cls):
        print('{0}ëª… ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.'.format(cls.count))

    # ë‹¤ë¥¸ ë¬¸ë²• 
    # ì¶œë ¥ : 2 
    print(False or 2)

    # ê°„í˜¹ ë°ì´í„°ë² ì´ìŠ¤ ë§Œì§ˆ ë•Œë‚˜ githubì— push í• ë•Œ secret key ê°™ì€ê±°. ì €ì¥í•  ë•Œ íŒ. 
    # config.py íŒŒì¼ì„ í•˜ë‚˜ ë§Œë“¤ê³  ì•ˆì— ë³€ìˆ˜ë¡œ ì‘ì„±. 
    # app.py ê°™ì€ flask ì•ˆì—ì„œ. https://mingrammer.com/ways-to-manage-the-configuration-in-python/  
    import config

    print(config.PASSWORD) # 123456 ì´ëŸ°ì‹ìœ¼ë¡œ ì ‘ê·¼. 

<span style="border:solid 1px black;background-color:#2e3f59"> </span> &nbsp; [í†µê³„ ê°œë… ì°¸ê³ ](https://chukycheese.github.io/statistics/twenty-nine-statistical-concepts-explained-in-simple-english/)  

* modality 

modality
modeëŠ” ìµœë¹ˆê°’ ì¦‰, modalityëŠ” ìµœë¹ˆê°’ì´ ë ìˆ˜ìˆëŠ” ì´ë¼ê³  í•´ì„í•˜ë©´ ë ê²ƒê°™ë‹¤. 

unimodal - í•˜ë‚˜
bimodal - ë‘˜
multimodal - ì…‹ ì´ìƒ.

<details><summary>code</summary>
<blockquote>
<pre><code>import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns 

f, ax = plt.subplots(nrows=1, ncols=3, figsize=(18, 4))

# Unimodal
sns.distplot(np.random.normal(10, 5, 10000), ax=ax[0], hist=False, color='blue')
ax[0].set_title('Unimodal', fontsize=14)
ax[0].set_yticklabels([])
ax[0].set_xticklabels([])

# Bimodal
sample_bimodal = pd.DataFrame({'feature1' : np.random.normal(10, 5, 10000),
                   'feature2' : np.random.normal(40, 10, 10000),
                   'feature3' : np.random.randint(0, 2, 10000),
                  })

sample_bimodal['combined'] = sample_bimodal.apply(lambda x: x.feature1 if (x.feature3 == 0 ) else x.feature2, axis=1)

sns.distplot(sample_bimodal['combined'].values, ax=ax[1], color='blue', hist=False)

ax2 = ax[1].twinx()  # instantiate a second axes that shares the same x-axis

sns.distplot(sample_bimodal.feature1, ax=ax2, color='blue', kde_kws={'linestyle':'--'}, hist=False)
sns.distplot((sample_bimodal.feature2), ax=ax2, color='blue', kde_kws={'linestyle':'--'}, hist=False)

f.tight_layout()  # otherwise the right y-label is slightly clipped

ax[1].set_title('Bimodal', fontsize=14)
ax[1].set_yticklabels([])
ax[1].set_xticklabels([])
ax2.set_yticklabels([])


# Multimodal
sample_multi = pd.DataFrame({'feature1' : np.random.normal(10, 5, 10000),
                   'feature2' : np.random.normal(40, 10, 10000),
                   'feature3' : np.random.randint(0, 3, 10000),
                               'feature4' : np.random.normal(80, 4, 10000),
                  })

sample_multi['combined'] = sample_multi.apply(lambda x: x.feature1 if (x.feature3 == 0 ) else (x.feature2 if x.feature3 == 1 else x.feature4), axis=1 )

sns.distplot(sample_multi['combined'].values, ax=ax[2], color='blue', hist=False)

ax3 = ax[2].twinx()  # instantiate a second axes that shares the same x-axis

sns.distplot(sample_multi.feature1, ax=ax3, color='blue', kde_kws={'linestyle':'--'}, hist=False)
sns.distplot((sample_multi.feature2), ax=ax3, color='blue', kde_kws={'linestyle':'--'}, hist=False)
sns.distplot((sample_multi.feature4), ax=ax3, color='blue', kde_kws={'linestyle':'--'}, hist=False)

f.tight_layout()  # otherwise the right y-label is slightly clipped

ax[2].set_title('Multimodal', fontsize=14)
ax[2].set_yticklabels([])
ax[2].set_xticklabels([])
ax3.set_yticklabels([])

plt.show()</code></pre>
</blockquote>
</details>

<img src="https://ifh.cc/g/rcenzU.png" width=700 height=200>

* qqplot 

normality test. ì˜¤ë¥¸ìª½ì´ qqplot ì™¼ìª½ì€ ë‹¨ìˆœ ë¶„í¬ í™•ì¸.

<details><summary>code</summary>
<blockquote></blockquote>
<pre><code>
import numpy as np
import matplotlib.pyplot as plt
from scipy.stats import kstest

# ì •ê·œë¶„í¬ 
temp1=np.random.normal(5,0.01,size=1000)

fig,ax=plt.subplots(1,2,figsize=(10,4),dpi=200)

sns.kdeplot(temp1,ax=ax[0]);
res=probplot(temp1,plot=ax[1])
kstest(temp1,'norm')

# ë¹„ì •ê·œ ë¶„í¬ - ì–´ë–¤íŒŒì¼ì„ ì„ì˜ë¡œ í•œê²ƒ. 
scaler=StandardScaler()

temp1=temp['í‰ë‹¹ê°€ê²©'].values

fig,ax=plt.subplots(1,2,figsize=(10,4),dpi=200)

sns.kdeplot(temp1,ax=ax[0]);
res=probplot(temp1,plot=ax[1])
temp1=scaler.fit_transform(temp1.reshape(-1,1))
kstest(temp1,'norm')

</code></pre>
</details>

<img src="https://ifh.cc/g/WdvAez.png" width=700 height=400>
<img src="https://ifh.cc/g/MbA5Uy.png" width=700 height=400>

* normality testì— ëŒ€í•´ì„œ  

í‘œë³¸ìˆ˜ê°€ 2000ê°œ ì´í•˜ë©´ shapiro testë¥¼ ì‚¬ìš©í•œë‹¤. ë°˜ëŒ€ë¼ë©´ Kolmogorovë¥¼ ì‚¬ìš©í•œë‹¤.   

H0 : ê·€ë¬´ê°€ì„¤. ê·€ë¬´ê°€ì„¤ì´ í‹€ë¦´í™•ë¥ ì„ ìœ ì˜ìˆ˜ì¤€ 0.05ë¼ê³  ì •í–ˆì„ ë•Œ, p-value(ì´ìƒê°’)ë¥¼ êµ¬í–ˆëŠ”ë° ì´ìƒê°’ ë‚˜ì˜¬ í™•ë¥ ë³´ë‹¤ ê·€ë¬´ê°€ì„¤ì´ í‹€ë¦´í™•ë¥ ì´ ë†’ìœ¼ë©´ ê·€ë¬´ê°€ì„¤ì„ ê¸°ê°í•œë‹¤. ë³´í†µ ê¸°ì¡´ì„ ìœ ì§€í•˜ëŠ”ê²ƒì„ ê·€ë¬´ê°€ì„¤. ë³€í™”ë¥¼ ì§€ì¼œë³´ëŠ” ìª½ì„ ëŒ€ë¦½ê°€ì„¤(H1)ì„ í•œë‹¤.     

ê·¸ë˜ì„œ ë¶„ì„ì— í•„ìš”í•œ ì—¬ëŸ¬ ë¶„ì„ì„ ê±°ì¹œë’¤ì— ëª¨ë¸ì„ ì •í•˜ëŠ”ë° ê°€ì¥ ê°„ë‹¨í•œ ì„ í˜•íšŒê·€ë„ 4ê°€ì§€ ê°€ì •ì´ ìˆë‹¤. 

* ì„ í˜• íšŒê·€ 

(1) ì„ í˜•ì„± : ë…ë¦½ë³€ìˆ˜ì™€ ì¢…ì†ë³€ìˆ˜ì˜ scatter plotì„ ê·¸ë ¤ ì„ í˜•ì„±ì„ íŒŒì•….  
(2) ë…ë¦½ì„± : ë…ë¦½ë³€ìˆ˜ë“¤ê°„ì— ìƒê´€ê´€ê³„ê°€ ì—†ëŠ”ì§€. ë‹¤ì¤‘íšŒê·€ì—ì„œ ì“°ì¸ë‹¤.  
(3) ë“±ë¶„ì‚°ì„± : ì¢…ì†ë³€ìˆ˜ì˜ ë¶„ì‚°ì´ ê°™ì€ì§€. ì£¼ì²´ëŠ” ì”ì°¨. ë§Œì•½ ê³¨ê³ ë£¨ í¼ì ¸ìˆì§€ì•Šë‹¤ë©´ ì—°ê²°í•˜ê¸° ìœ„í•œ ë§¤ê°œë³€ìˆ˜ê°€ í•„ìš”í•˜ë‹¤.  
(4) ì •ê·œì„± : ì •ê·œë¶„í¬ë¥¼ ë„ëŠ”ì§€.   

ê·¸ë˜ì„œ ë³´í†µ ì„ í˜•íšŒê·€ê°€ ë§ëŠ”ë° ì°¾ê¸°ê°€ ì–´ë µë‹¤. ê·¸ë˜ì„œ ë¹„ëª¨ìˆ˜ í†µê³„ ëª¨ë¸ì„ ë§ì´ ì‚¬ìš©í•œë‹¤.  

* ë¹„ëª¨ìˆ˜ í†µê³„ ëª¨ë¸ 

k-ìµœê·¼ì ‘ ì•Œê³ ë¦¬ì¦˜, randomforest, ì˜ì‚¬ê²°ì •íŠ¸ë¦¬ ê°™ì€ ëª¨ë¸ë“¤ì´ ìˆë‹¤.  

ì•½ê°„, semi-ëª¨ìˆ˜ í†µê³„ ëª¨ë¸ì´ë¼ê³  í•˜ëŠ” Support Vector Machine, ì¸ê³µì‹ ê²½ë§ì´ ìˆë‹¤.  

ë³€ìˆ˜ì˜ í™•ë¥  ë¶„í¬ë¥¼ ì‹ ê²½ì“°ëŠ”ì§€ ì—¬ë¶€ì— ë”°ë¼ êµ¬ë¶„í–ˆë‹¤. [ì°¸ê³ ](https://brunch.co.kr/@seoungbumkim/7)

* ëª¨ë¸ì˜ ì •ê·œí™”

ë‚˜ì¤‘ì— ì¸ê³µì§€ëŠ¥ íŒŒíŠ¸ì—ì„œë„ layer normalizationê³¼ batch normalization ê°™ì€ ì •ê·œí™” ê¸°ë²•ì„ ë³¼ ìˆ˜ ìˆëŠ”ë°, tabular ì—ì„œë„ ë³¼ ìˆ˜ ìˆë‹¤. 

normalization

    :::python 
    # ê¸°ë³¸ parameterë¡œ ë˜ì„œ ë‹¤ë¥¸ê±´ ì•ˆë§Œì§€ë©´ ëœë‹¤.
    # ì°¸ê³ ì‚¬ì´íŠ¸ https://www.kaggle.com/raphael2711/customer-segmentation-with-gmm-clustering
    from sklearn.preprocessing import StandardScaler,normalize

    scaler=StandardScaler()

    X_std=scaler.fit_transform(X) # í‘œì¤€í™” -> ê° ì—´ì— ëŒ€í•´ì„œ ë…ë¦½
    X=normalize(X_std) # ì •ê·œí™” -> ê° í–‰ì— ëŒ€í•´ì„œ ë…ë¦½

* feature engineering 

í”¼ì²˜ ê³µí•™ì€ ëª¨ë¸ ì˜ ì„¤ëª…í•  ìˆ˜ ìˆëŠ” featuresë¥¼ ë§Œë“œëŠ”ê²Œ ëª©ì ì´ë‹¤.   
ê·¸ ì¤‘ ë²”ì£¼í˜• ë³€ìˆ˜ë“¤ì„ ë‹¤ë£¨ëŠ” ì¢‹ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ìˆë‹¤. 
[categorical ë³€ìˆ˜ ë‹¤ë£¨ê¸° ì°¸ê³ ](https://www.kaggle.com/subinium/11-categorical-encoders-and-benchmark) 

    :::python
    from category_encoders import LeaveOneOutEncoder

    loo = LeaveOneOutEncoder()
    # train ë°ì´í„°ì˜ categorical columnsë“¤ê³¼ ì¼ëŒ€ì¼ ëŒ€ì‘ì¸ targetë“¤ì„ ë§ì¶°ì¤ë‹ˆë‹¤. 
    # leave one out encoderì€ í˜„ì¬ targetì„ ì œì™¸í•œ íƒ€ê²Ÿë“¤ì˜ í‰ê· ì„ ê³„ì‚°í•˜ì—¬ featureë¥¼ ë§Œë“­ë‹ˆë‹¤. 
    loo.fit(train_df[cat_cols], train_df['target'])  
    train_df[new_feature] = loo.transform(train_df[cat_cols])

<span style="border:solid 1px black;background-color:#2e3f59"> </span> &nbsp; ì‹œê°í™”  

* Pseudo-code (ì˜ì‚¬ì½”ë“œ) 

ì´ëŸ°ì‹ìœ¼ë¡œ ì•Œê³ ë¦¬ì¦˜ì„ì„ ì•Œë¦¬ê³ , ì•Œê¸° ì‰½ê²Œ ì…ë ¥ë³€ìˆ˜ì™€ ì¶œë ¥ ë³€ìˆ˜, ê³¼ì •ì„ ì•Œê¸° ì‰½ê²Œ í•œë‹¤.  

<pre>
Algorithm array_sum
input : array
output : sum of array elements

sum <- 0
for all elements in array do
    sum <- sum + each element

return sum
</pre>

* matplotlib 

kaggleì—ëŠ” ì„¸ê³„ì˜ ë§ì€ ë¶„ë“¤ì´ ì €ë§ˆë‹¤ì˜ ì¬ë°Œê³  ìœ ìš©í•œ ìŠ¤í‚¬ë“¤ì„ ë³´ì—¬ì¤€ë‹¤.  
ì°¸ê³  í–ˆë˜ ì‚¬ì´íŠ¸ë‹¤. [ì°¸ê³ ](https://www.kaggle.com/joshuaswords/data-visualization-clustering-mall-data) 

    :::python
    import matplotlib.pyplot as plt
    
    fig,ax=plt.subplots(1,1,figsize=(15,10),dpi=200) # ì¦ê²¨í•˜ëŠ” ì•½ì†ê°™ì€ ì½”ë“œë‹¤.  
    ax.grid(axis='y',linestyle='-',alpha=0.4)  # y gridë§Œ ê·¸ë¦°ë‹¤. 

    # figëŠ” í° í‹€. axëŠ” ê·¸ ì•ˆì— canvasë¼ê³  ìƒê°í•œë‹¤. 
    # ì•„ë˜ ì½”ë“œëŠ” fig ì•ˆì— lineì„ ê·¸ë ¤ ì¹¸ì„ ë‚˜ëˆ„ëŠ”ê²ƒì´ë‹¤. figëŠ” ê±°ì˜ ë¬´í•œí•˜ë‹¤ê³  ìƒê°í•˜ë©´ ëœë‹¤. 
    # ê·¸ ì•ˆì— axë¡œ ì¡°ì ˆì„ í•˜ëŠ”ê±´ë° ì•„ë˜ ì½”ë“œì™€ ê°™ì´ ì“°ì¸ fig.text ê°€ ìˆë‹¤. 

    import matplotlib.lines as lines
    l1 = lines.Line2D([1.05, 1.05], [0, 1.05], transform=fig.transFigure, figure=fig,color='black',lw=0.2)
    fig.lines.extend([l1])

    fig.text(1.185, 0.715, '''
    The two most frequent age bands are 20-30 
    and 30-40. In the early stages of our 
    exploratory analysis, we can already start
    to think about who our most important customers
    are and, importantly, how we might tailor our
    marketing activities or promotional offers based
    on customer segments.
    ''', fontsize=12, fontweight='light', fontfamily='serif')

* html symbols

html ê³µë¶€ì¤‘ ì•Œê²Œ ëë‹¤. [ì°¸ê³ ](https://www.rapidtables.com/web/html/html-codes.html)   
 `&#60;` ëŠ” < ë¥¼ ì˜ë¯¸í•œë‹¤. 

* emojis 

github í˜¹ì€ kaggle ë˜ëŠ” ê¸€ì— ğŸ”¥ ì´ë ‡ê²Œ ì“¸ ìˆ˜ ìˆëŠ” emoji ë“¤ì´ë‹¤. [ì°¸ê³ ](https://emojipedia.org/)  

<span style="border:solid 1px black;background-color:#2e3f59"> </span> &nbsp; macOS 

ë§¥ë¶ë„ ê³µë¶€í•œë‹¤.  

* mac : ë‹¨ì¶•í‚¤ 

ë§¥ë¶ì€ commandí‚¤ë¡œ ì‰½ê²Œ ì¡°ì‘ì´ ê°€ëŠ¥í•˜ë‹¤.   
ê·¸ ì¤‘ ê´œì°®ì€ ìŠ¤í‚¬ì´ë‹¤.  

<pre>
command+space : spotlight ê²€ìƒ‰. (ì–´í”Œ ì‹¤í–‰ ì‹œ ìì£¼ì‚¬ìš©)
ctrl+command+f : ì „ì²´í™”ë©´. (ì „ì²´í™”ë©´ í›„ í„°ì¹˜íŒ¨ë“œ ì„¸ì†ê°€ë½ìœ¼ë¡œ ì™”ë‹¤ê°”ë‹¤ê°€ ì œì¼ ì¢‹ë‹¤.)
command+shift+l : ì½ê¸°ëª©ë¡ ì˜†ì— í‚¤ìš°ê¸°. ì•„ë˜ ì½”ë“œì™€ ì—°ê³„ë‹¤. 
command+shift+d : í˜„ì¬ í˜ì´ì§€ ì €ì¥. 
command+l : ì£¼ì†Œ ê²€ìƒ‰ (êµ¬ê¸€ë¡œ ì„¤ì • í•˜ë©´ ê²€ìƒ‰ì´ ì‰¬ì›Œì§„ë‹¤.)
</pre>

* vim 
 
[ê³µë¶€ ì˜ìƒ](https://www.youtube.com/watch?v=g-XsXEsd6xA&t=256s)

<pre>

</pre>


